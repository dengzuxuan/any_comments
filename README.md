### 点评类项目
##### 核心：Redis
核心要点：
1. 登陆模块
- 集群登陆问题-session解决
![1653319474181](/pic/1653319474181.png)
- 拦截器优化-双层拦截器
   ![1653320764547](/pic/1653320764547.png)
2. 商品模块
- 数据缓存
  ![1653322097736](/pic/1653322097736.png)
- 内存更新策略  
cache aside，先操作db 再操作cache
  ![1653323595206](/pic/1653323595206.png)
- 缓存穿透  
采用缓存空对象的方式解决缓存穿透，也可以使用布隆过滤器
  ![1653327124561](/pic/1653327124561.png)
- 缓存雪崩  
降级限流/ttl添加随机值/多级缓存/redis集群
- 缓存击穿  
互斥锁解决缓存重建【低性能 高可用】  
  ![1653328288627](/pic/1653328288627.png)

逻辑过期开线程解决【低可用 高性能】
![1653328663897](/pic/1653328663897.png)
3. 秒杀模块
 - 生成唯一id  
第一位是符号位，2~32是时间戳，32~64是以当天作key的redis自增value
   ![1653363172079](/pic/1653363172079.png)
 - 基本逻辑  
   ![1653366238564](/pic/1653366238564.png)
 - 超卖问题  
多线程下会产生安全问题，多线程访问共享资源，悲观锁是确保线程串行，客观锁可以分为CAS法以及版本号法，核心是对比。悲观锁性能差，乐观锁成功率低。
   ![1653368562591](/pic/1653368562591.png)